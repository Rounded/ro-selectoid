angular.module("ro.selectoid",[]),angular.module("ro.selectoid").provider("roSelectoid",function(){var e={};return{registerEndpoint:function(t,o){console.log("REGISTERING API:",t,o),e[t]=o},$get:function(){return{searchEndpoints:e}}}}),angular.module("ro.selectoid").directive("roSelectoidResult",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"ro-selectoid-result.html"}}),angular.module("ro.selectoid").directive("roSelectoidResults",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"ro-selectoid-results.html",scope:!0,require:"^roSelectoid",link:function(e,t,o,r){e.selectoid=r,t.on("click touchstart","a",r.close)}}}),angular.module("ro.selectoid").directive("roSelectoidSearch",["$injector","$log","roSelectoid",function(e,t,o){return{restrict:"EA",replace:!0,templateUrl:"ro-selectoid-search.html",require:"^roSelectoid",link:function(r,l,n,c){r.selectoid=c;var i,a;n.endpoint?(i=o.searchEndpoints[n.endpoint],i||t.error('Endpoint "'+n.endpoint+'" not found.'),a=e.invoke(i)):a=angular.noop,r.search=function(){var e=c.query;console.log("SEARCHING FOR:",e);a(e).then(function(t){console.log("GOT RESULTS:",t),e===c.query&&(c.results=t)})}}}}]),angular.module("ro.selectoid").directive("roSelectoidToggle",function(){return{restrict:"EA",replace:!0,transclude:!0,template:function(e,t){var o=t.tagName||"a",r="<"+o+' class="selectoid-toggle" data-ng-click="selectoid.open()" data-ng-transclude></'+o+">";return r},scope:{placeholder:"@"},require:"^roSelectoid",link:function(e,t,o,r){e.selectoid=r}}}),angular.module("ro.selectoid").directive("roSelectoid",function(){var e=0;return{restrict:"EA",replace:!0,transclude:!0,template:function(e,t){var o=t.tagName||"div",r="<"+o+' class="selectoid" data-ng-transclude></'+o+">";return r},require:"ngModel",scope:!0,controller:["$scope","$element",function(t,o){var r=this,l=o.controller("ngModel");l.$render=function(){console.log("RENDER WAS CALLED",l.$viewValue)},r.select=function(e){r.selected=e,l.$setViewValue(e)},r.toggleId="ro-selectoid-toggle-"+ ++e;var n='<div class="selectoid-backdrop"></div>';r.open=function(){o.addClass("open"),angular.element(n).insertBefore(o.find(".selectoid-results")).on("click touchstart",r.close)},r.close=function(){angular.element(".selectoid-backdrop").remove(),o.removeClass("open")},r.isOpen=function(){return o.hasClass("open")};var c="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";o.on("keydown",function(e){if(38===e.which||40===e.which){var t,l=angular.element(e.target);if(l.is(".selectoid-toggle")&&40==e.which)r.isOpen()?o.find(".selectoid-results").find(c).first().trigger("focus"):r.open();else{t=o.find(".selectoid-results").find(c);var n=t.index(e.target),i=0;~n&&(38==e.which&&n>0&&(i=n-1),40==e.which&&n<t.length-1&&(i=n+1)),t.eq(i).trigger("focus")}}})}],controllerAs:"selectoid"}}),angular.module("ro.selectoid").run(["$templateCache",function(e){e.put("ro-selectoid-result.html",'<div class="selectoid-result" data-ng-transclude></div>\n')}]),angular.module("ro.selectoid").run(["$templateCache",function(e){e.put("ro-selectoid-results.html",'<ul class="dropdown-menu" role="menu" data-ng-attr-aria-labelledby="{{ dropdown.toggleId }}" data-ng-transclude></ul>\n')}]),angular.module("ro.selectoid").run(["$templateCache",function(e){e.put("ro-selectoid-search.html",'<input class="selectoid-search" type="text" data-ng-model="selectoid.query" data-ng-change="search()">\n')}]);